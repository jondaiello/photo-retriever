function buildPreview(e,t,n,i){var o=document.createElement("a");o.href=t,o.target="_blank",o.className="c-preview",o.setAttribute("data-img-id",n),o.setAttribute("data-img-index",i);var a=document.createElement("img");a.src=e,a.className="c-preview__img",o.appendChild(a),photoGrid.appendChild(o)}function displayDetails(e,t){var n,i,o,a,r=photoData[t];if(document.getElementById("photo-detail"))n=document.getElementById("photo-detail"),i=document.getElementById("photo-detail__img"),i.src=r.urls.regular,i.setAttribute("alt",r.user.name);else{n=document.createElement("div"),n.id="photo-detail",n.className="c-details",n.classList.add("a-fadein"),o=document.createElement("button"),o.className="c-btn--prev c-btn--arrow-left",o.id="prev-btn",o.innerHTML="Previous",o.addEventListener("click",function(){loadPreviousPhoto()}),a=document.createElement("button"),a.className="c-btn--next c-btn--arrow-right",a.id="next-btn",a.innerHTML="Next",a.addEventListener("click",function(){loadNextPhoto()}),i=document.createElement("img"),i.id="photo-detail__img",i.classList.add("c-details__img"),i.classList.add("a-fadeindown"),i.src=r.urls.regular,i.setAttribute("data-img-id",e),i.setAttribute("data-img-index",t),i.setAttribute("alt","Photo by "+r.user.name);var s=document.createElement("button");s.id="photo-detail__close",s.className="c-btn--close",s.innerHTML="Close",s.addEventListener("click",function(){var e=document.getElementById("photo-detail");e.parentNode.removeChild(e)}),n.appendChild(o),n.appendChild(a),n.appendChild(s),n.appendChild(i),document.body.appendChild(n)}}function swapDetailPhotos(e,t,n){var i,o;t=parseInt(t),"prev"===n&&(o="right"),"next"===n&&(o="left"),e.classList.remove("a-fadeindown"),e.classList.add("a-fadeout"+o),e.id="previous-photo",e.addEventListener("animationend",function(){e.parentNode.removeChild(e),i="prev"===n?0===t?parseInt(photoData.length)-1:t-1:t>=photoData.length-1?0:t+1;var a=document.createElement("img");a.classList.add("c-details__img"),a.classList.add("a-fadein"+o),a.setAttribute("data-img-index",i),a.id="photo-detail__img",a.src=photoData[i].urls.regular,document.getElementById("photo-detail").appendChild(a)})}function loadPreviousPhoto(){var e=document.getElementById("photo-detail__img"),t=e.getAttribute("data-img-index");swapDetailPhotos(e,t,"prev")}function loadNextPhoto(){var e=document.getElementById("photo-detail__img"),t=e.getAttribute("data-img-index");swapDetailPhotos(e,t,"next")}function expandPhoto(e){e.preventDefault(),displayDetails(this.getAttribute("data-img-id"),this.getAttribute("data-img-index"))}function getPhotos(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(photoData=JSON.parse(e.responseText),photoData.forEach(function(e,t){if(buildPreview(e.urls.small,e.urls.regular,e.id,t),t+1===photoData.length){photoPreviews=photoGrid.querySelectorAll(".c-preview"),previewIMGs=document.querySelectorAll(".c-preview__img"),fixObjectFit();for(var n=0;n<photoPreviews.length;n++)photoPreviews[n].addEventListener("click",expandPhoto)}}))},e.open("GET",API_URL,!0),e.send()}function fixObjectFit(){if(!Modernizr.objectfit)for(var e=0;e<previewIMGs.length;e++)previewIMGs[e].classList.add("u-invisible"),previewIMGs[e].parentNode.setAttribute("style","background-image: url("+previewIMGs[e].src+")"),previewIMGs[e].parentNode.classList.add("u-objectfit-fix")}function init(){getPhotos()}!function(e,t,n){function i(e,t){return typeof e===t}function o(){var e,t,n,o,a,r,s;for(var d in b)if(b.hasOwnProperty(d)){if(e=[],t=b[d],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)r=e[a],s=r.split("."),1===s.length?w[s[0]]=o:(!w[s[0]]||w[s[0]]instanceof Boolean||(w[s[0]]=new Boolean(w[s[0]])),w[s[0]][s[1]]=o),g.push((o?"":"no-")+s.join("-"))}}function a(e){var t=_.className,n=w._config.classPrefix||"";if(x&&(t=t.baseVal),w._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}w._config.enableClasses&&(t+=" "+n+e.join(" "+n),x?_.className.baseVal=t:_.className=t)}function r(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function s(e,t){return!!~(""+e).indexOf(t)}function d(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):x?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function l(e,t){return function(){return e.apply(t,arguments)}}function c(e,t,n){var o;for(var a in e)if(e[a]in t)return n===!1?e[a]:(o=t[e[a]],i(o,"function")?l(o,n||t):o);return!1}function u(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function p(){var e=t.body;return e||(e=d(x?"svg":"body"),e.fake=!0),e}function f(e,n,i,o){var a,r,s,l,c="modernizr",u=d("div"),f=p();if(parseInt(i,10))for(;i--;)s=d("div"),s.id=o?o[i]:c+(i+1),u.appendChild(s);return a=d("style"),a.type="text/css",a.id="s"+c,(f.fake?f:u).appendChild(a),f.appendChild(u),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),u.id=c,f.fake&&(f.style.background="",f.style.overflow="hidden",l=_.style.overflow,_.style.overflow="hidden",_.appendChild(f)),r=n(u,e),f.fake?(f.parentNode.removeChild(f),_.style.overflow=l,_.offsetHeight):u.parentNode.removeChild(u),!!r}function m(t,i){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(u(t[o]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var a=[];o--;)a.push("("+u(t[o])+":"+i+")");return a=a.join(" or "),f("@supports ("+a+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function h(e,t,o,a){function l(){u&&(delete A.style,delete A.modElem)}if(a=!i(a,"undefined")&&a,!i(o,"undefined")){var c=m(e,o);if(!i(c,"undefined"))return c}for(var u,p,f,h,v,g=["modernizr","tspan","samp"];!A.style&&g.length;)u=!0,A.modElem=d(g.shift()),A.style=A.modElem.style;for(f=e.length,p=0;f>p;p++)if(h=e[p],v=A.style[h],s(h,"-")&&(h=r(h)),A.style[h]!==n){if(a||i(o,"undefined"))return l(),"pfx"!=t||h;try{A.style[h]=o}catch(e){}if(A.style[h]!=v)return l(),"pfx"!=t||h}return l(),!1}function v(e,t,n,o,a){var r=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+E.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?h(s,t,o,a):(s=(e+" "+L.join(r+" ")+r).split(" "),c(s,t,n))}var g=[],b=[],y={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){b.push({name:e,fn:t,options:n})},addAsyncTest:function(e){b.push({name:null,fn:e})}},w=function(){};w.prototype=y,w=new w;var _=t.documentElement,x="svg"===_.nodeName.toLowerCase(),C="Moz O ms Webkit",E=y._config.usePrefixes?C.split(" "):[];y._cssomPrefixes=E;var P=function(t){var i,o=prefixes.length,a=e.CSSRule;if("undefined"==typeof a)return n;if(!t)return!1;if(t=t.replace(/^@/,""),i=t.replace(/-/g,"_").toUpperCase()+"_RULE",i in a)return"@"+t;for(var r=0;o>r;r++){var s=prefixes[r],d=s.toUpperCase()+"_"+i;if(d in a)return"@-"+s.toLowerCase()+"-"+t}return!1};y.atRule=P;var L=y._config.usePrefixes?C.toLowerCase().split(" "):[];y._domPrefixes=L;var N={elem:d("modernizr")};w._q.push(function(){delete N.elem});var A={style:N.elem.style};w._q.unshift(function(){delete A.style}),y.testAllProps=v;var S=y.prefixed=function(e,t,n){return 0===e.indexOf("@")?P(e):(-1!=e.indexOf("-")&&(e=r(e)),t?v(e,t,n):v(e,"pfx"))};w.addTest("objectfit",!!S("objectFit"),{aliases:["object-fit"]}),o(),a(g),delete y.addTest,delete y.addAsyncTest;for(var I=0;I<w._q.length;I++)w._q[I]();e.Modernizr=w}(window,document);const API_URL="https://api.unsplash.com/photos/?client_id=5c680ed0727325d7218e6fcbf3a5fbeac540121b2fe88064fdb54e9011dc7aef&per_page=9&order_by=popular";var photoGrid=document.getElementById("photo-grid"),photoData,photoPreviews,previewIMGs;window.onload=init();