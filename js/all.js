function buildPreview(t,e,a,i){var o=document.createElement("a");o.href=e,o.target="_blank",o.className="c-preview",o.setAttribute("data-img-id",a),o.setAttribute("data-img-index",i);var n=document.createElement("img");n.src=t,n.className="c-preview__img",o.appendChild(n),photoGrid.appendChild(o)}function displayDetails(t,e){var a,i,o,n,d=photoData[e];if(document.getElementById("photo-detail"))a=document.getElementById("photo-detail"),i=document.getElementById("photo-detail__img"),i.src=d.urls.regular,i.setAttribute("alt",d.user.name);else{a=document.createElement("div"),a.id="photo-detail",a.className="c-details",a.classList.add("a-fadein"),o=document.createElement("button"),o.className="c-btn--prev c-btn--arrow-left",o.id="prev-btn",o.innerHTML="Previous",o.addEventListener("click",function(){loadPreviousPhoto()}),n=document.createElement("button"),n.className="c-btn--next c-btn--arrow-right",n.id="next-btn",n.innerHTML="Next",n.addEventListener("click",function(){loadNextPhoto()}),i=document.createElement("img"),i.id="photo-detail__img",i.classList.add("c-details__img"),i.classList.add("a-fadeindown"),i.src=d.urls.regular,i.setAttribute("data-img-id",t),i.setAttribute("data-img-index",e),i.setAttribute("alt","Photo by "+d.user.name);var r=document.createElement("button");r.id="photo-detail__close",r.className="c-btn--close",r.innerHTML="Close",r.addEventListener("click",function(){document.getElementById("photo-detail").remove()}),a.appendChild(o),a.appendChild(n),a.appendChild(r),a.appendChild(i),document.body.appendChild(a)}}function swapDetailPhotos(t,e,a){var i,o;e=parseInt(e),"prev"===a&&(o="right"),"next"===a&&(o="left"),t.classList.remove("a-fadeindown"),t.classList.add("a-fadeout"+o),t.id="previous-photo",t.addEventListener("animationend",function(){t.remove(),i="prev"===a?0===e?parseInt(photoData.length)-1:e-1:e>=photoData.length-1?0:e+1;var n=document.createElement("img");n.classList.add("c-details__img"),n.classList.add("a-fadein"+o),n.setAttribute("data-img-index",i),n.id="photo-detail__img",n.src=photoData[i].urls.regular,document.getElementById("photo-detail").appendChild(n)})}function loadPreviousPhoto(){var t=document.getElementById("photo-detail__img"),e=t.getAttribute("data-img-index");swapDetailPhotos(t,e,"prev")}function loadNextPhoto(){var t=document.getElementById("photo-detail__img"),e=t.getAttribute("data-img-index");swapDetailPhotos(t,e,"next")}function expandPhoto(t){t.preventDefault(),displayDetails(this.getAttribute("data-img-id"),this.getAttribute("data-img-index"))}function getPhotos(){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(photoData=JSON.parse(t.responseText),photoData.forEach(function(t,e){if(buildPreview(t.urls.small,t.urls.regular,t.id,e),e+1===photoData.length){photoPreviews=photoGrid.querySelectorAll(".c-preview");for(var a=0;a<photoPreviews.length;a++)photoPreviews[a].addEventListener("click",expandPhoto)}}))},t.open("GET",API_URL,!0),t.send()}function init(){getPhotos()}const API_URL="https://api.unsplash.com/photos/?client_id=5c680ed0727325d7218e6fcbf3a5fbeac540121b2fe88064fdb54e9011dc7aef&per_page=9&order_by=popular";var photoGrid=document.getElementById("photo-grid"),photoData,photoPreviews;window.onload=init();